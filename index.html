<!doctype html>
<head>
	<meta charset="utf-8"/>
	<title>Guns Girl Z Story Interpreter</title>
	
	<!--Let browser know website is optimized for mobile-->
	<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
	
	<!-- Favicon and mobile browser 'webpage as app' support -->
	<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
	<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
	<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
	<link rel="manifest" href="/site.webmanifest">
	<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
	<meta name="msapplication-TileColor" content="#2b5797">
	<meta name="theme-color" content="#1a237e">
	
	<!--For discord description -->
	<meta property="og:title" content="Guns Girl Z Story Interpreter" />
	<meta property="og:type" content="website" />
	<meta property="og:url" content="http://ggz.amaryllisworks.pw" />
	<!--<meta property="og:image" content="http://my.site.com/images/thumb.png" />-->
	<meta property="og:description" content="Read the story from Guns Girl Z in the web browser." />
	<meta name='description' content="Read the story from Guns Girl Z in the web browser." />
	<meta name="robots" content="noarchive, nosnippet">

	
	<!--Resources -->
	<link rel="preconnect" href="https://fonts.gstatic.com">
	<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500&display=swap" rel="stylesheet">  
	<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
	<!--<link type="text/css" rel="stylesheet" href="materialize.css"  media="screen,projection"/>-->
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
	<link rel="stylesheet" href="stylesheet.css">

</head>

<script src="analytics.js"></script>
<!-- <script src="Sortable.js"></script> -->
<!-- tfw no bandwidth -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/Sortable/1.15.2/Sortable.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>


<!--Helper functions-->
<script>
	//https://stackoverflow.com/a/57401891
	/*function adjustColor(color, amount) {
		return '#' + color.replace(/^#/, '').replace(/../g, color => ('0'+Math.min(255, Math.max(0, parseInt(color, 16) + amount)).toString(16)).substr(-2));
	}*/
	
	//https://www.w3schools.com/js/js_cookies.asp
	function setCookie(cname, cvalue, exdays) {
		var d = new Date();
		d.setTime(d.getTime() + (exdays*24*60*60*1000));
		var expires = "expires="+ d.toUTCString();
		document.cookie = cname + "=" + cvalue + ";SameSite=Lax;" + expires + ";path=/";
	}
	function getCookie(cname) {
		var name = cname + "=";
		var decodedCookie = decodeURIComponent(document.cookie);
		var ca = decodedCookie.split(';');
		for(var i = 0; i <ca.length; i++) {
			var c = ca[i];
			while (c.charAt(0) == ' ') {
				c = c.substring(1);
			}
			if (c.indexOf(name) == 0) {
				return c.substring(name.length, c.length);
			}
		}
		return "";
	}
	
	//https://stackoverflow.com/a/29998400
	function JavaSplit(string,separator,n) {
		var split = string.split(separator);
		if (split.length <= n)
			return split;
		var out = split.slice(0,n-1);
		out.push(split.slice(n-1).join(separator));
		return out;
	}
	
	
	/**
	 * String.prototype.replaceAll() polyfill
	 * https://gomakethings.com/how-to-replace-a-section-of-a-string-with-another-one-with-vanilla-js/
	 * @author Chris Ferdinandi
	 * @license MIT
	 */
	if (!String.prototype.replaceAll) {
		String.prototype.replaceAll = function(str, newStr){

			// If a regex pattern
			if (Object.prototype.toString.call(str).toLowerCase() === '[object regexp]') {
				return this.replace(str, newStr);
			}

			// If a string
			return this.replace(new RegExp(str, 'g'), newStr);

		};
	}
	
	
	function download(data, filename, type) {
		var file = new Blob([data], {type: type});
		if (window.navigator.msSaveOrOpenBlob) // IE10+
		    window.navigator.msSaveOrOpenBlob(file, filename);
		else { // Others
		    var a = document.createElement("a"),
		            url = URL.createObjectURL(file);
		    a.href = url;
		    a.download = filename;
		    document.body.appendChild(a);
		    a.click();
		    setTimeout(function() {
		        document.body.removeChild(a);
		        window.URL.revokeObjectURL(url);  
		    }, 0); 
		}
	}


</script>
<!--The main program-->
<script src="script.js"></script>
<script src="client-side-translator.js"></script>
<body>

	<nav class='nav-extended'>
		<div class="nav-wrapper" id='theTop'>
			<a href="#" data-target="slide-out" class="sidenav-trigger brand-logo left" style="position: relative; margin-left: 15px; display:inline !important;">
				<i class="material-icons">menu</i>
			</a>
			<a href="#" class="brand-logo center" style="text-overflow: ellipsis; white-space: nowrap;">
				<span class='header-desktop' translate>Houkai2nd Story Interpreter</span>
				<span class='header-desktop-shorter' translate>GGZ Story Interpreter</span>
				<span class='header-mobile' translate>GGZ S.I.</span>
			</a>

			<ul id="nav-mobile" class="right">
				<li><a href="#languageModal" class="waves-effect waves-light modal-trigger navbarButton"><i class="material-icons left">language</i><span class='header-desktop' translate="">Language</span></a></li>
				<!--<li><a class="waves-effect waves-light dropdown-trigger navbarButton" data-target="languageDropdown"><i class="material-icons left">language</i><span class='header-desktop'>Language</span></a></li>-->
				<li><a onclick="NightMode()" class="waves-effect waves-light navbarButton"><i class="material-icons left">brightness_2</i><span class='header-desktop' translate="Dark Theme">Dark Theme</span></a></li>
				<li><a href="#settingsModal" class="waves-effect waves-light modal-trigger navbarButton"><i class="material-icons left">settings</i><span class='header-desktop' translate="">Settings</span></a></li>
			</ul>
		</div>
		<div class="col s12 nav-content">
			<!-- <span style="display:inline-block; width:100%" id="motd"></span> -->
			<ul class="tabs tabs-transparent" id='navbarTabs'>
				<li class="tab col s3"><a href="#mainEpisodesWrapper" translate>Chapter Library</a></li>
				<li class="tab col s3"><a href="#sideEpisodesWrapper" translate>Fire Moth DLC</a></li>
				<li class="tab col s3"><a href="#eventEpisodesWrapper" translate="">Unknown Data</a></li>
				<li class="tab col s3"><a href="#crossoverEpisodesWrapper" translate="">Crossover Stories</a></li>
				<li class="tab col s3"><a href="#customCutsceneWrapper" translate="">Write your own VN segment (WIP)</a></li>
			</ul>
		</div>
	</nav>
	<ul id="slide-out" class="sidenav">
		<li class='divider-with-text'>Interpreters &amp; Tools</li>
		<li><a href="#!" class="sidenav-close"><i class="material-icons">menu_book</i><span translate>Story Interpreter</span></a></li>
		<li><a href="/portrait_debugger"><i class='material-icons'>collections</i><span>Portrait Debugger</span></a></li>
	

		<!--<li><a href="/search.html"><i class="material-icons">search</i><span translate>Search Cutscenes</span></a></li>-->
		<li class='divider-with-text'></li>
		<li><a href="https://ww2.amaryllisworks.pw"><i class="material-icons">logout</i><span translate>Other Story Interpreters</span></a></li>
	</ul>

	<!-- Modal Structure -->
	<!-- 
		This is handled by the Settings Manager
		To add a setting, just set amw-setting in the <tr> with the name
		of the setting.
		Then you can access it in JavaScript using SETTINGSMAN.nameOfSetting
		All settings will automatically save and load when added to this page. Clicking the inputs will change the value in SETTINGSMAN.
		onclick for all input tags will be overridden, so don't set them.

		Why not use JSON? Because screw you that's why.
	-->
	<div id="settingsModal" class="modal modal-fixed-footer">
		<div class="modal-content">
		<h4 translate="">Settings</h4>

		<table class="material-settings-table">
			<!--<tr>
				<td style="width:100%" colspan="2">
					<span class="title">Use system dark mode</span>
					<p>Are you one of those cool kids that has Android 10 or iOS 13 or Windows 10? Turn this on to match your device&apos;s system preferences.</p>
					
					<div class="input-field col s12">
						<select>
						  <option value="1">Dark & Light</option>
						  <option value="2">Black & Light</option>
						  <option value="3">Disabled (Default)</option>
						</select>
					</div>
				</td>
			</tr>-->
			<tr setting-name="fancyOrNot" setting-default="true">
				<td style="width:100%">
					<span class="title" translate>Display images and portraits in story</span>
					<p translate>Turn it off if you want to save your mobile data or copy the text into a word processor.</p>
				</td>
				<td>
					<div class="switch">
						<label>
						  <input type="checkbox" id="fancyOrNot">
						  <span class="lever"></span>
						</label>
					</div>
				</td>
			</tr>
			<tr setting-name="quickScroll" setting-default="true">
				<td style="width:100%">
					<span class="title" translate="">Quick scrolling</span>
					<p translate="">Click or tap an image to jump to the next one in stories.</p>
				</td>
				<td>
					<div class="switch">
						<label>
						  <input type="checkbox" id="quickScroll">
						  <span class="lever"></span>
						</label>
					</div>
				</td>
			</tr>
			<!--<tr>
				<td style="width:100%">
					<span class="title">Inline Text</span>
					<p>Make the text display on top of the image.</p>
				</td>
				<td>
					<div class="switch">
						<label>
						  <input type="checkbox" onclick="setCookieFromCheckbox('inlineText'); runFromRoutableKeyString()" id="inlineText">
						  <span class="lever"></span>
						</label>
					</div>
				</td>
			</tr>-->
			<tr setting-name="advancedCSS" setting-default="true">
				<td style="width:100%">
					<span class="title" translate="">Advanced CSS Effects</span>
					<p translate="">Enable more demanding effects like snow animations. It might lag on mobile devices.</p>
				</td>
				<td>
					<div class="switch">
						<label>
						  <input type="checkbox" id="advancedCSS">
						  <span class="lever"></span>
						</label>
					</div>
				</td>
			</tr>
			<!--<tr>
				<td style="width:100%" colspan="2">
					<span class="title">Effect Detail Level</span>
					<p>More advanced effects. Lower the value if your device is lagging.</p>
					<p>Off: No fancy HTML stuff.</p>
					<p>Medium: Night BGs are rendered and blue portrait masks display correctly.</p>
					<p>High: CSS snow and fire effects are displayed.</p>
					<div class="input-field col s12">
						<select>
						  <option value="1">Off</option>
						  <option value="2">Medium</option>
						  <option value="3">High</option>
						</select>
					</div>
				</td>
			</tr>-->
			<tr setting-name="skipGenerationOfDuplicateBoxes">
    			<td style="width:100%">
    				<span class="title" translate="">Skip duplicate story CG boxes</span>
    				<p translate="">Skips generating a new CG box if only the speaker's name changed.</p>
    			</td>
    			<td>
					<div class="switch">
						<label>
						  <input type="checkbox" id="skipGenerationOfDuplicateBoxes">
						  <span class="lever"></span>
						</label>
					</div>
				</td>
			</tr>
			<tr setting-name="showSFXButtons">
				<td style="width:100%">
					<span class="title" translate="">Show SFX buttons</span>
					<p translate="">If you don't care about sound effects being shown, turn this off.</p>
					<p translate="">This is off by default.</p>
				</td>
				<td>
					<div class="switch">
						<label>
						  <input type="checkbox" id="showSFXButtons">
						  <span class="lever"></span>
						</label>
					</div>
				</td>
			</tr>
			<tr setting-name="showDebugOpcodeButton">
				<td style="width:100%">
					<span class="title" translate="">Debug Mode</span>
					<p translate="">Displays buttons for showing debug opcodes in stories and warns if a portrait is missing. You probably don't want this enabled.</p>
				</td>
				<td>
					<div class="switch">
						<label>
						  <input type="checkbox" id="showDebugOpcodeButton">
						  <span class="lever"></span>
						</label>
					</div>
				</td>
			</tr>
			<tr style="border-bottom:none; height:75px">
				<td style="width:100%">
					<span class="title coloredDialogue" style='color:#33b5e5' translate="">Experimental Settings</span>
					<p translate>Not all of these options are implemented. Turning them on will probably do nothing.</p>
				</td>
				<br>
			</tr>
			<tr setting-name="keyboardNavigation">
				<td style="width:100%">
					<span class="title" translate="">Keyboard navigation</span>
					<p>Use tab and arrow keys to read the story scenes. Might conflict with accessibility tools or alternative ways of browsing.</p>
					<p>TAB - Navigate to the next box</p>
					<p>SHIFT+TAB - Navigate to the previous box</p>
					<p>&uparrow; &amp; &downarrow; ARROWS - Alternative prev/next box keybind</p>
					<p>CTRL+E - In multilanguage mode with a custom language set, begin editing</p>
					<p>CTRL 1 to 5 - In multilanguage mode, copy translated text into the custom tab and begin editing.</p>
				</td>
				<td>
					<div class="switch">
						<label>
						  <input type="checkbox" id="keyboardNavigation">
						  <span class="lever"></span>
						</label>
					</div>
				</td>
			</tr>
			<tr setting-name="showExportButton">
				<td style="width:100%">
					<span class="title">Show export button</span>
					<p>Export current cutscene to an html document.</p>
				</td>
				<td>
					<div class="switch">
						<label>
						  <input type="checkbox" id="showExportButton">
						  <span class="lever"></span>
						</label>
					</div>
				</td>
			</tr>
			<tr setting-name="showRenderButton" >
				<td style="width:100%">
					<span class="title">Show render button</span>
					<p>Display a button below every CG to render it and export as an image.</p>
				</td>
				<td>
					<div class="switch">
						<label>
						  <input type="checkbox" id="showRenderButton">
						  <span class="lever"></span>
						</label>
					</div>
				</td>
			</tr>
			<tr setting-name="amw_key" setting-type="string" setting-default="">
				<td style="width:100%" colspan="2">
					<span class="title">AMW Config</span>
					<div class="input-field col s6">
						<input id="amw_key" type="text" class="validate">
						<label for="amw_key">You've stepped upon a plank where your mind is the key.</label>
					</div>
				</td>
			</tr>
		</table>
		</div>
		<div class="modal-footer">
		  <a class="modal-close waves-effect waves-green btn-flat" onclick="runFromRoutableKeyString()">Close</a>
		</div>
	</div>
	<div id="languageModal" class="modal modal-fixed-footer">
		<div class="modal-content">
			<table class="material-settings-table">
				<tr setting-type="list"> <!-- SETTINGSMAN does not support currently -->
					<td style="width:100%" colspan="2">

						<span class='title' translate="">Language Selection</span>
						<p translate="">In order from top to bottom, this will determine what text gets displayed. If there is no text for the language, it will fall back to the next one on the list.</p>
						<p translate="">Click and hold the list items, then move them below/above others to rearrange them.</p>
						<!-- <p>If a line of dialogue is not translated in the primary language, it will fall back to the secondary language and then the tertiary language if the secondary is untranslated.</p> -->
						<!--It is automatically generated by JavaScript, check onLoad func and languages Array-->
						<!-- <div class="input-field col s12">
							<select id="language1" class='LanguageSelect'>
							</select>
							<label>Primary Language</label>
						</div>
						<div class="input-field col s12" >
							<select id="language2" class='LanguageSelect'>
							</select>
							<label>Secondary Language</label>
						</div>
						<div class="input-field col s12">
							<select id="language3" class='LanguageSelect'>
							</select>
							<label>Tertiary Language</label>
						</div> -->

						<ul class="LanguageSelect collection" id="LanguageSelect" style="border-radius: 15px">
							<!-- <li class="collection-item left-icon" style="cursor:grab"><i class="material-icons">drag_handle</i>Alvin</li> -->
						</ul>
								
					</td>
				</tr>
				<tr setting-name="multilanguageEnabled" setting-type="boolean" setting-default="false" style="border-bottom:0" >
					<td style="width:100%">
						<span class="title" translate="">Multilanguage mode</span>
						<p>Language selection option will be ignored and all languages will be shown side by side.</p>
						
					</td>
					<td rowspan="2">
						<div class="switch">
							<label>
							  <input type="checkbox" id="multilanguageEnabled">
							  <span class="lever"></span>
							</label>
						</div>
					</td>
				</tr>
				<tr setting-type="checkboxes" setting-name="multiLanguage" setting-default="en,cn,jp,en_re">
					<td style="width:100%">
						<p>Languages to show:</p>
						<!--It is automatically generated by JavaScript, check onLoad func and languages Array-->
						<div id="settingsLanguagesColumn">
							<!--<label style="margin-right: 20px;">
							<input type="checkbox" class="filled-in" checked="checked" />
							<span>English</span>
							</label>
							<label>
							<input type="checkbox" class="filled-in" checked="checked" />
							<span>English</span>
							</label>-->

						</div>
					</td>
				</tr>
				<tr setting-name="tnNote" setting-type="radio">
					<td style="width:100%" colspan="2">
						<span class="title" translate="">Show Translation Notes</span>
						<p translate="">Only applies to English (retranslated).</p>
						<div>
							<form action="#">
								<label>
									<input name="group-tn" type="radio" value="0"/>
									<span>Shown</span>
								</label>
								<label>
									<input name="group-tn" type="radio" value="1"/>
									<span>Shown below and smaller</span>
								</label>
								<label>
									<input name="group-tn" type="radio" value="2"/>
									<span>Hidden</span>
								</label>
							</form>
						</div>
					</td>
				</tr>
				<tr setting-name="translation_api_key" setting-type="string" setting-default="">
					<td style="width:100%;" colspan="2">
						<span class="title">Community retranslation server</span>
						<p>Help everyone retranslate the game into your preferred language! You can download the latest retranslation here and add new lines. Afterwards you can submit it and it will be reviewed.</p>
						<p>The imported language will automatically be added to multilanguage mode and named "Custom".</p>
						<p>(Radio buttons are only for downloading, the upload will match the downloaded language no matter what)</p>
						<form action="#">
							<label>
							  <input name="group1" type="radio" value="en_re" checked />
							  <span>English (Retranslation)</span>
							</label>
							<label>
								<input name="group1" type="radio" value="pt" />
								<span>Portuguese</span>
							</label>
							<label>
								<input name="group1" type="radio" value="en_abridged" />
								<span>English Abridged (Joke translation)</span>
							</label>
						</form>
						<a class="waves-effect waves-light btn "  onclick="downloadRetranslation()"><i class="material-icons left">cloud_download</i>Download from community server</a>
						<a class="waves-effect waves-light btn "  onclick="uploadRetranslation()"><i class="material-icons left">cloud_upload</i>Submit to community server</a>
						<p style='visibility:hidden;' id='translationServerStatus'>Loading...</p>
						<p>If you have an API key, enter it here. API keys are not required at the moment.</p>
						<div class="input-field col s6">
							<input id="translation_api_key" type="text" class="validate">
							<label for="translation_api_key">API Key</label>
						</div>
					</td>
				</tr>
				<tr setting-name="highlightEmptyTranslations">
					<td style="width:100%">
						<span class="title">Highlight empty translations red, changed translations blue</span>
						<p>If you use the community retranslation server.</p>
					</td>
					<td>
						<div class="switch">
							<label>
							  <input type="checkbox" id="highlightEmptyTranslations">
							  <span class="lever"></span>
							</label>
						</div>
					</td>
				</tr>
				<tr>
					<td style="width:100%" colspan="2">
						<span class="title">Import/Export Language Keys</span>
						<p>If you have the original game files dumped and would like to add additional languages or quickly modify the TextMap.tsv file, you can do it here.</p>
						<p>Column 2 will be imported. Only one langauge can be imported into the interpreter at a time!</p>
						<p>The imported language will automatically be added to multilanguage mode and named "Custom".</p>
						<div ondrop='dropHandler(event)' ondragover="dragOverHandler(event);" style="display:inline;">
							<a class="waves-effect waves-light btn" onclick="document.getElementById('file-input-language').click();"><i class="material-icons left">folder_open</i>Import</a>	
							<input id="file-input-language" type="file" accept='.tsv,.txt' name="jsonInput" style="display: none;" onchange="processCustomLanguage(event)"/>
						</div>
						<a class="waves-effect waves-light btn disabled" id="exportLanguageBtn" onclick="exportCustomLanguage()"><i class="material-icons left">save</i>Export</a>
						<a class="waves-effect waves-light btn disabled" id="deleteLanguageBtn" onclick="deleteCustomLanguage()"><i class="material-icons left">delete</i>Delete</a>
						<!--<div class="input-field col s6">
							<input id="first_name" type="text" class="validate">
							<label for="first_name">Column to Import/Export</label>
						</div>-->
						<p id="importMessage"></p>
					</td>
				</tr>
			</table>
		</div>
		<div class="modal-footer">
		  <a class="modal-close waves-effect waves-green btn-flat" onclick="runFromRoutableKeyString()">Close</a>
		</div>
	</div>
	<div id="savePageModal" class="modal">
		<div class="modal-content">
			<h4>Exporter</h4>
			<p>This process will render all images used in the current cutscene to static images. <b>It will immediately start downloading files to your disk, and there will be a lot of them.</b></p>
			<p>It will take a while to render! It will lag your browser! It will use a lot of memory and storage! <b>Make sure you have ~500MB of free space and at least 2GB of RAM! Save your work because the browser might crash!</b></p>
			<p>Select your export option below.</p>
		</div>
		<div class="modal-footer">
		  <a class="modal-close waves-effect waves-green btn-flat">Cancel</a>
		  <a class="modal-close waves-effect waves-green btn-flat disabled">self contained html</a>
		  <a class="modal-close waves-effect waves-green btn-flat disabled">self contained js-compressed html</a>
		  <a class="modal-close waves-effect waves-green btn-flat disabled">.odt</a>
		  <a class="modal-close waves-effect waves-green btn-flat">zipped html</a>
		  
		</div>
	</div>

  
	<noscript><h1>Turn on JavaScript. The website takes json files containing the VN segment information and renders them in your browser.</h1></noscript>
	<noscript><h3>Static HTTP pages are coming never. You'll have to look at the source code and write it yourself.</h3></noscript>
	<div id='chapterSelect' class='navbar-fixed'>
		<div class='row'>
			<!--<a href=#modal1" class="modal-trigger" >Settings</a>-->

			<!--Because materialize.js is stupid -->
			<div class="col s12" id="mainEpisodesWrapper">
				<div class="flex-container col s12" id="mainEpisodes"></div>
			</div>
			
			<div class="col s12" id="eventEpisodesWrapper">
				<div class="flex-container col s12" id="eventEpisodes"></div>
			</div>
			<div class="col s12" id="sideEpisodesWrapper">
				<div class="flex-container col s12" id="sideEpisodes"></div>
			</div>
			<div class="col s12" id="crossoverEpisodesWrapper">
				<div class="flex-container col s12" id="crossoverEpisodes"></div>
			</div>
			<div class="col s12" id="customCutsceneWrapper">
				<div id="customCutscene">
					<p>WIP... Currently only .json loading works. It will automatically render when loaded.</p>
					<p id='customCutsceneError' style='color:red;display:none;'>Test</p>
					<a class="waves-effect waves-light btn disabled" onclick="document.getElementById('file-input-txt').click();"><i class="material-icons right">folder_open</i>Load .txt</a>
					<div ondrop='dropHandler(event)' ondragover="dragOverHandler(event);" style="display:inline;">
						<a class="waves-effect waves-light btn" onclick="document.getElementById('file-input-json').click();"><i class="material-icons right">folder_open</i>Load .json</a>	
						<input id="file-input-json" type="file" accept='.json' name="jsonInput" style="display: none;" />
					</div>
					
					<input id="file-input-txt" type="file"  accept='.txt'  name="txtInput" style="display: none;" multiple />
					<br>
					<div style='padding-top:10px'>
						<p style='text-align:left;'>Part 1</p>
						<textarea placeholder="Type in your txt (GFL) or iop (Interpreter) styled codes here." id="textarea1"></textarea>
					</div>
					<a class="waves-effect waves-light btn disabled" onclick=""><i class="material-icons add">folder_open</i>Add another part</a>
					<a class="waves-effect waves-light btn disabled" onclick=""><i class="material-icons delete">folder_open</i>Delete last part</a>
					<p>Select 'json' if you've been using the longer raw syntax. Select 'iop' if you've been using the interpreter's shorthand syntax.</p>
					<div class="switch">
						<label>
						  txt
						  <input type="checkbox" checked onclick="" id="customIsTXTorIOP">
						  <span class="lever"></span>
						  iop
						</label>
					</div>
					<br>
					<a class="waves-effect waves-light btn disabled" onclick="runFromUserInput();"><i class="material-icons right">code</i>Run!</a>
				    
				</div>
			</div>
		</div>
		
	</div>
	
	<!--I've completely forgotten why display:inline is required for this-->
	<h2 id="chapterName" style="display:inline">Chapter Name Here</h2>
	<h4 id="chapterDesc" style="font-size:1.5rem;line-height:100%;margin:1rem 0 .912rem 0;overflow-wrap: break-word;">Chapter Description Here</h4>
	<br>
	<a id="exportButton" href='#savePageModal' class="waves-effect waves-light btn modal-trigger" style='display:none'><i class="material-icons left">file_download</i>Export current chapter</a>


	<hr>

	<div id="verySimpleText"></div>
	<div id="storyFooterButtons">
		<a class="waves-effect waves-light btn" onclick="goToPrevEpisode();"><i class="material-icons left">chevron_left</i><span translate>Go to the previous story</span></a>
		<a class="waves-effect waves-light btn" onclick="document.getElementById('theTop').scrollIntoView()"><i class="material-icons left">vertical_align_top</i><span translate>Back to top</span></a>
		<a class="waves-effect waves-light btn" onclick="goToNextEpisode();"><i class="material-icons left">chevron_right</i><span translate>Go to the next story</span></a>
	</div>
	<hr>
	<audio controls loop id="audioPlayer">
		<source class='a_ogg' src="" type="audio/ogg"> <!-- Turns out putting something in makes firefox load it when you load the page, wasting bandwidth. But leaving it blank is fine. -->
		<source class='a_mp3' src="" type="audio/mp3"> <!-- Because iOS doesn't support ogg -->
		Your browser does not support the audio tag.
	</audio>
	<audio id='sfxPlayer'>
		<source class='sfx_ogg' src="" type="audio/ogg">
	</audio>
	<p>Website programmed and maintained by Amaryllis</p>
	<p>Special thanks to the <a href="https://hoyostans.be/">Hoyostans</a> team including Mister Spaceman, Demonbanex, Bun Bun, Darkmiz, Haeldral and anyone else I forgot for retrospective retranslation, sorting, and more.</p>
	<p>Thx to Max for supporting the site since its inception in 2022</p>
	<p>Shoutouts to the <a href="https://arca.live/b/honkaigakuen">HG2 KR Community</a> for KR translation</p>
	<p><a href="/credits">You can see the rest of the credits here!</a></p>
	<p>If you want a feature or something is broken, <a onmousemove="(function(self){self.href='mailto:PatchouliSama765'+String.fromCharCode(64)+'gmail.com'})(this)" href="mailto:'hover mouse over the link twice to pass the bot check'"><b>email me</b></a>.</p>
	<hr>
	<p>Terms of Use &amp; Licenses:</p>
	<p>You are free to record the site, use images, use text, etc as long as you give credit by linking back to this website. There is no need to ask for permission.</p>
	<p>For source code editing and build scripts, please refer to the AGPLv3 terms. (AGPLv3 does not apply if you are not planning on doing any programming)</p>
	<p>There are no monetization restrictions, but if miHoYo goes after you it&apos;s your problem, not mine.</p>
	<p><a href='/LICENSE.html'>The story interpreter is free and open source software and licensed under AGPLv3.</a> Source code is available <a id="antibot" href="enable javascript!!">here (Make an account to view)</a></p>
	<p>Designed using <a href='https://materializecss.com'>Materialize</a>. <a href='https://github.com/Dogfalo/materialize/blob/master/LICENSE'>MIT license</a></p>
	<p>Draggable language list by Sortable.js</p>
	<hr>
	<p>Support me on ko-fi if you can, development costs time and I make minimum wage. My web server costs $50 USD/yr to run too!</p>
	<script type='text/javascript' src='https://storage.ko-fi.com/cdn/widget/Widget_2.js'></script><script type='text/javascript'>kofiwidget2.init('Support the Amaryllis Empire', '#29abe0', 'D1D7Y21A');kofiwidget2.draw();</script>
	<p>Need a programmer for your next job? email me. I have 5 years of experience with lua and some experience with Python, C++, JavaScript, and C#.</p>
</body>
